{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "## Steps to Reproduce\r\n\r\n1. Make sure your current Flutter channel is Stable in IDE Preferences!\r\n2.  Run `flutter pub get`\r\n3.  See <your-project>/.packages file and verify that is uses the stable channel\r\n![Screen Shot 2021-01-28 at 12 08 31](https://user-images.githubusercontent.com/67424416/106130374-8c63ba00-6161-11eb-8236-85633593740b.png)\r\n\r\n1. Now go to Preferences and change the Flutter channel to Master\r\n\r\nExpected: for the .package file to use the new Flutter channel directory\r\nActual: This file remains unchanged and stay in a invalid state since it references a invalid Flutter directory that is not in sync with the IDE. \r\n\r\nNow, if you try to run `flutter run` in the Terminal of the IDE, it will show supported devices from Master channel and if you select one of them (Chrome or any desktop target) it will crash because the tool will try to use the .packages file but since it still referencing Stable channel the tool then crash. See the logs bellow\r\n\r\n\r\n<details>\r\n<summary>logs</summary>\r\n\r\n```bash\r\nMacBook-Pro-de-MacBook:flutter_example pedromassango$ flutterm run\r\nMultiple devices found:\r\nmacOS (desktop) â€¢ macos  â€¢ darwin-x64     â€¢ macOS 11.1 20C69 darwin-x64\r\nChrome (web)    â€¢ chrome â€¢ web-javascript â€¢ Google Chrome 88.0.4324.96\r\n[1]: macOS (macos)\r\n[2]: Chrome (chrome)\r\nPlease choose one (To quit, press \"q/Q\"): 1\r\n\r\nLaunching lib/main.dart on macOS in debug mode...\r\nWarning: CocoaPods recommended version 1.10.0 or greater not installed.\r\nPods handling may fail on some projects involving plugins.\r\nTo upgrade see https://guides.cocoapods.org/using/getting-started.html#installation for instructions.\r\n\r\n\r\n\r\nRunning pod install...                                           2,242ms\r\n../../../Code/flutter_stable/packages/flutter/lib/src/widgets/media_query.dart:129:29: Error: Type 'ui.Window' not found.\r\n  MediaQueryData.fromWindow(ui.Window window)                           \r\n                            ^^^^^^^^^                                   \r\n../../../Code/flutter_stable/packages/flutter/lib/src/foundation/binding.dart:88:3: Error: Type 'ui.Window' not found.\r\n  ui.Window get window => ui.window;                                    \r\n  ^^^^^^^^^                                                             \r\n../../../Code/flutter_stable/packages/flutter/lib/src/rendering/view.dart:60:14: Error: Type 'ui.Window' not found.\r\n    required ui.Window window,                                          \r\n             ^^^^^^^^^                                                  \r\n../../../Code/flutter_stable/packages/flutter/lib/src/rendering/view.dart:88:9: Error: Type 'ui.Window' not found.\r\n  final ui.Window _window;                                              \r\n        ^^^^^^^^^                                                       \r\n../../../Code/flutter_stable/packages/flutter/lib/src/material/page.dart:48:15: Error: Getter not found: 'opaque'.\r\n       assert(opaque),                                                  \r\n              ^^^^^^                                                    \r\n../../../Code/flutter_stable/packages/flutter/lib/src/material/page.dart:189:15: Error: Getter not found: 'opaque'.\r\n       assert(opaque),                                                  \r\n              ^^^^^^                                                    \r\n../../../Code/flutter_stable/packages/flutter/lib/src/widgets/framework.dart:1900:15: Error: Getter not found: 'runtimeType'.\r\n            \"$runtimeType's children must not contain any null values, \"\r\n              ^^^^^^^^^^^                                               \r\n../../../Code/flutter_stable/packages/flutter/lib/src/widgets/media_query.dart:129:32: Error: 'Window' isn't a type.\r\n  MediaQueryData.fromWindow(ui.Window window)                           \r\n                               ^^^^^^                                   \r\n../../../Code/flutter_stable/packages/flutter/lib/src/cupertino/route.dart:353:15: Error: Getter not found: 'opaque'.\r\n       assert(opaque),                                                  \r\n              ^^^^^^                                                    \r\n../../../Code/flutter_stable/packages/flutter/lib/src/cupertino/route.dart:380:15: Error: Getter not found: 'opaque'.\r\n       assert(opaque),                                                  \r\n              ^^^^^^                                                    \r\n../../../Code/flutter_stable/packages/flutter/lib/src/rendering/view.dart:60:17: Error: 'Window' isn't a type.\r\n    required ui.Window window,                                          \r\n                ^^^^^^                                                  \r\n../../../Code/flutter_stable/packages/flutter/lib/src/rendering/view.dart:88:12: Error: 'Window' isn't a type.\r\n  final ui.Window _window;                                              \r\n           ^^^^^^                                                       \r\n                                                                        \r\nCommand PhaseScriptExecution failed with a nonzero exit code            \r\nnote: Using new build system                                            \r\nnote: Building targets in parallel                                      \r\nnote: Planning build                                                    \r\nnote: Constructing build description                                    \r\n** BUILD FAILED **                                                      \r\n                                                                        \r\nBuilding macOS application...                                           \r\nException: Build process failed\r\nMacBook-Pro-de-MacBook:flutter_example pedromassango$ \r\n```\r\n</details>\r\n\r\n\r\n\r\n## Version info\r\n\r\n<details>\r\n<summary>flutter doctor -v</summary>\r\n\r\n```bash\r\n[âœ“] Flutter (Channel master, 1.26.0-13.0.pre.229, on macOS 11.1 20C69 darwin-x64, locale en)\r\n    â€¢ Flutter version 1.26.0-13.0.pre.229 at /Users/pedromassango/Code/flutter_master\r\n    â€¢ Framework revision 650b240634 (72 minutes ago), 2021-01-27 21:39:06 -0800\r\n    â€¢ Engine revision 68cd4c42b5\r\n    â€¢ Dart version 2.12.0 (build 2.12.0-267.0.dev)\r\n\r\n[âœ“] Android toolchain - develop for Android devices (Android SDK version 30.0.2)\r\n    â€¢ Android SDK at /Users/pedromassango/Library/Android/sdk\r\n    â€¢ Platform android-30, build-tools 30.0.2\r\n    â€¢ Java binary at: /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java\r\n    â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_242-release-1644-b3-6915495)\r\n    â€¢ All Android licenses accepted.\r\n\r\n[!] Xcode - develop for iOS and macOS\r\n    â€¢ Xcode at /Applications/Xcode.app/Contents/Developer\r\n    â€¢ Xcode 12.1, Build version 12A7403\r\n    ! CocoaPods 1.9.3 out of date (1.10.0 is recommended).\r\n        CocoaPods is used to retrieve the iOS and macOS platform side's plugin code that responds to your plugin usage on the Dart side.\r\n        Without CocoaPods, plugins will not work on iOS or macOS.\r\n        For more info, see https://flutter.dev/platform-plugins\r\n      To upgrade see https://guides.cocoapods.org/using/getting-started.html#installation for instructions.\r\n\r\n[âœ“] Chrome - develop for the web\r\n    â€¢ Chrome at /Applications/Google Chrome.app/Contents/MacOS/Google Chrome\r\n\r\n[âœ“] Android Studio (version 4.1)\r\n    â€¢ Android Studio at /Applications/Android Studio.app/Contents\r\n    â€¢ Flutter plugin can be installed from:\r\n      ðŸ”¨ https://plugins.jetbrains.com/plugin/9212-flutter\r\n    â€¢ Dart plugin can be installed from:\r\n      ðŸ”¨ https://plugins.jetbrains.com/plugin/6351-dart\r\n    â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_242-release-1644-b3-6915495)\r\n\r\n[âœ“] IntelliJ IDEA Community Edition (version 2020.3.1)\r\n    â€¢ IntelliJ at /Applications/IntelliJ IDEA CE.app\r\n    â€¢ Flutter plugin version 52.2.5\r\n    â€¢ Dart plugin version 203.6912\r\n\r\n[âœ“] VS Code (version 1.52.1)\r\n    â€¢ VS Code at /Applications/Visual Studio Code.app/Contents\r\n    â€¢ Flutter extension version 3.18.1\r\n\r\n[âœ“] Connected device (2 available)\r\n    â€¢ macOS (desktop) â€¢ macos  â€¢ darwin-x64     â€¢ macOS 11.1 20C69 darwin-x64\r\n    â€¢ Chrome (web)    â€¢ chrome â€¢ web-javascript â€¢ Google Chrome 88.0.4324.96\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\n</details>\r\n\r\n",
    "closed_at": "2021-09-23T22:12:42Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "When changing the SDK in Flutter preferences, we should stash the current channel, save the changes, then check the channel (after clearing the internal cache). if the channel has changed, activate the Flutter Pub Get action.",
            "created_at": "2021-07-21T22:52:27Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/5222#issuecomment-884548041",
            "id": 884548041,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222",
            "node_id": "IC_kwDOA9MwhM40uSHJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/884548041/reactions"
            },
            "updated_at": "2021-07-21T22:52:27Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/884548041",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222/comments",
    "created_at": "2021-01-28T11:12:12Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-01-29T15:57:46Z",
            "event": "labeled",
            "id": 4266849754,
            "label": {
                "color": "84b6eb",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDQyNjY4NDk3NTQ=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/4266849754"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-01-29T15:57:50Z",
            "event": "milestoned",
            "id": 4266850123,
            "milestone": {
                "title": "On Deck"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDQyNjY4NTAxMjM=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/4266850123"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-21T22:52:43Z",
            "event": "demilestoned",
            "id": 5052884392,
            "milestone": {
                "title": "On Deck"
            },
            "node_id": "MDE3OkRlbWlsZXN0b25lZEV2ZW50NTA1Mjg4NDM5Mg==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/5052884392"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-07-21T22:52:43Z",
            "event": "milestoned",
            "id": 5052884393,
            "milestone": {
                "title": "M61"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDUwNTI4ODQzOTM=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/5052884393"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2021-09-23T22:12:42Z",
            "event": "closed",
            "id": 5352704440,
            "node_id": "CE_lADOA9MwhM4vcJjKzwAAAAE_C8m4",
            "performed_via_github_app": null,
            "state_reason": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/5352704440"
        }
    ],
    "events_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222/events",
    "html_url": "https://github.com/flutter/flutter-intellij/issues/5222",
    "id": 795908298,
    "labels": [
        {
            "color": "84b6eb",
            "default": true,
            "description": null,
            "id": 414053718,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MTQwNTM3MTg=",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2021-10-04T16:51:35Z",
        "closed_issues": 17,
        "created_at": "2021-06-30T21:02:15Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
            "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
            "followers_url": "https://api.github.com/users/stevemessick/followers",
            "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/stevemessick",
            "id": 8518285,
            "login": "stevemessick",
            "node_id": "MDQ6VXNlcjg1MTgyODU=",
            "organizations_url": "https://api.github.com/users/stevemessick/orgs",
            "received_events_url": "https://api.github.com/users/stevemessick/received_events",
            "repos_url": "https://api.github.com/users/stevemessick/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/stevemessick"
        },
        "description": "",
        "due_on": "2021-10-04T07:00:00Z",
        "html_url": "https://github.com/flutter/flutter-intellij/milestone/73",
        "id": 6905037,
        "labels_url": "https://api.github.com/repos/flutter/flutter-intellij/milestones/73/labels",
        "node_id": "MDk6TWlsZXN0b25lNjkwNTAzNw==",
        "number": 73,
        "open_issues": 0,
        "state": "closed",
        "title": "M61",
        "updated_at": "2021-10-04T16:51:35Z",
        "url": "https://api.github.com/repos/flutter/flutter-intellij/milestones/73"
    },
    "node_id": "MDU6SXNzdWU3OTU5MDgyOTg=",
    "number": 5222,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222/reactions"
    },
    "repository_url": "https://api.github.com/repos/flutter/flutter-intellij",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222/timeline",
    "title": "[proposal] Run <flutter pub get> and update .packages file once Flutter channel is changed in Preferences",
    "updated_at": "2021-09-23T22:12:42Z",
    "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/5222",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/67424416?v=4",
        "events_url": "https://api.github.com/users/pedromassangocode/events{/privacy}",
        "followers_url": "https://api.github.com/users/pedromassangocode/followers",
        "following_url": "https://api.github.com/users/pedromassangocode/following{/other_user}",
        "gists_url": "https://api.github.com/users/pedromassangocode/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/pedromassangocode",
        "id": 67424416,
        "login": "pedromassangocode",
        "node_id": "MDQ6VXNlcjY3NDI0NDE2",
        "organizations_url": "https://api.github.com/users/pedromassangocode/orgs",
        "received_events_url": "https://api.github.com/users/pedromassangocode/received_events",
        "repos_url": "https://api.github.com/users/pedromassangocode/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/pedromassangocode/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pedromassangocode/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/pedromassangocode"
    }
}