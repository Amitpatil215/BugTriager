{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "## Description\r\nRunning Flutter unit tests inside a folder returns various errors including 'pubspec.yaml file not found' or  'No Tests Found'. The later results in a large body of JSON content with numerous references to 'dart:ui' not found.\r\n\r\n## Steps to Reproduce\r\n1. Open an existing Flutter Project and ensure either of the following two dependencies are included in `pubspec.yaml`:\r\n    -  `test: ^1.17.10`\r\n    - `bloc_test: ^9.0.23`\r\n2. Right click on the `test` folder or any sub-folder and Choose `Run Tests in your_app`\r\n\r\n## Expected\r\nUnit tests should run successfully and the output presented correctly (tree like structure) using the flutter test harness like they have in the past.\r\n\r\n## Actual\r\nUnit tests are run using `dart.exe run test -r json <target_folder>` and either of the two error messages in the description are shown.\r\n  - 'pubspec.yaml not found' can often be resolved by running `flutter pub cache repair && flutter clean && flutter pub get`\r\n\r\n## Additional Info\r\nThis behavior _seems_ to be the result of something in the new Bumblebee patch in conflict with the Flutter plugin. Specifically, adding either `test` or `bloc_test` as `dev_dependencies` in `pubspec.yaml` create a transitive reference that Android Studio picks up which causes it to present the Run/Debug options when right clicking a folder. Previously, this wasn't a problem and a user could safely run those tests via that menu or using the short cut option `Ctrl+Shift+F10`.  Now, however, all tests in the folder are run using the dart executable as mentioned above. Individual files can still be run as unit tests however the Run/Debug option has a sub option to run them as either dart or flutter tests. The former causes issues for flutter tests and requires the configuration to be deleted before it can be re-tried as a flutter test.\r\n\r\n## Version info\r\nInfo attached: [flutter_doctor.txt](https://github.com/flutter/flutter-intellij/files/8318178/flutter_doctor.txt)\r\n\r\n",
    "closed_at": "2022-03-28T20:20:49Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "How do you get a Run menu item from right-clicking a folder? I don't get one.\r\n\r\nThe Dart plugin adds a Run option when a Dart file is selected. Flutter adds one, too, but it can't delete the one from the Dart plugin. We'd have to work with JetBrains to change that.\r\n\r\nAlso, see my comment in [#6046](https://github.com/flutter/flutter-intellij/issues/6046#issuecomment-1076886402). There *may* be tips to mitigate the issue.",
            "created_at": "2022-03-23T22:54:53Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/6048#issuecomment-1076898784",
            "id": 1076898784,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048",
            "node_id": "IC_kwDOA9MwhM5AMCvg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/1076898784/reactions"
            },
            "updated_at": "2022-03-23T22:54:53Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/1076898784",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            }
        },
        {
            "author_association": "NONE",
            "body": "Try adding one of the packages I mentioned in the report. I also tested the process with a brand new flutter project and was able to replicate the problem.  Right-clicking on a test folder is standard IDEA behavior, I think it's just something about how flutter is returning action items is stopping it.  \r\n\r\nI tried #6406 but it doesn't change anything it seems.",
            "created_at": "2022-03-24T00:31:25Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/6048#issuecomment-1076949070",
            "id": 1076949070,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048",
            "node_id": "IC_kwDOA9MwhM5AMPBO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/1076949070/reactions"
            },
            "updated_at": "2022-03-24T00:31:25Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/1076949070",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1778998?v=4",
                "events_url": "https://api.github.com/users/firephreek/events{/privacy}",
                "followers_url": "https://api.github.com/users/firephreek/followers",
                "following_url": "https://api.github.com/users/firephreek/following{/other_user}",
                "gists_url": "https://api.github.com/users/firephreek/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/firephreek",
                "id": 1778998,
                "login": "firephreek",
                "node_id": "MDQ6VXNlcjE3Nzg5OTg=",
                "organizations_url": "https://api.github.com/users/firephreek/orgs",
                "received_events_url": "https://api.github.com/users/firephreek/received_events",
                "repos_url": "https://api.github.com/users/firephreek/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/firephreek/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/firephreek/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/firephreek"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048/comments",
    "created_at": "2022-03-21T18:11:02Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-03-23T22:55:05Z",
            "event": "labeled",
            "id": 6295368874,
            "label": {
                "color": "000000",
                "name": "waiting for customer response"
            },
            "node_id": "LE_lADOA9MwhM5GFKZPzwAAAAF3O7Sq",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/6295368874"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26350515?v=4",
                "events_url": "https://api.github.com/users/no-response%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/no-response%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/no-response%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/no-response%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/no-response",
                "id": 32965360,
                "login": "no-response[bot]",
                "node_id": "MDM6Qm90MzI5NjUzNjA=",
                "organizations_url": "https://api.github.com/users/no-response%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/no-response%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/no-response%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/no-response%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/no-response%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/no-response%5Bbot%5D"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-03-24T00:31:30Z",
            "event": "unlabeled",
            "id": 6295675176,
            "label": {
                "color": "000000",
                "name": "waiting for customer response"
            },
            "node_id": "UNLE_lADOA9MwhM5GFKZPzwAAAAF3QGEo",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/6295675176"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2022-03-28T20:20:49Z",
            "event": "closed",
            "id": 6321468239,
            "node_id": "CE_lADOA9MwhM5GFKZPzwAAAAF4yfNP",
            "performed_via_github_app": null,
            "state_reason": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/6321468239"
        }
    ],
    "events_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048/events",
    "html_url": "https://github.com/flutter/flutter-intellij/issues/6048",
    "id": 1175758415,
    "labels": [],
    "labels_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOA9MwhM5GFKZP",
    "number": 6048,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048/reactions"
    },
    "repository_url": "https://api.github.com/repos/flutter/flutter-intellij",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048/timeline",
    "title": "Inconsistent/Broken behavior when running unit tests in Bumblebee Patch 2",
    "updated_at": "2022-03-28T20:20:49Z",
    "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/6048",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1778998?v=4",
        "events_url": "https://api.github.com/users/firephreek/events{/privacy}",
        "followers_url": "https://api.github.com/users/firephreek/followers",
        "following_url": "https://api.github.com/users/firephreek/following{/other_user}",
        "gists_url": "https://api.github.com/users/firephreek/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/firephreek",
        "id": 1778998,
        "login": "firephreek",
        "node_id": "MDQ6VXNlcjE3Nzg5OTg=",
        "organizations_url": "https://api.github.com/users/firephreek/orgs",
        "received_events_url": "https://api.github.com/users/firephreek/received_events",
        "repos_url": "https://api.github.com/users/firephreek/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/firephreek/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/firephreek/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/firephreek"
    }
}