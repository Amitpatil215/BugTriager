{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Calling `flutter --version`, may trigger a download and subsequent building of the flutter tool.\r\n\r\n```\r\n[~/src/repos/flutter] (master) $ flutter version\r\nDownloading Dart SDK from Flutter engine 995e3247fe500ff6e9981bd6e2409191c4f9a32a...\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100 49.7M  100 49.7M    0     0  11.1M      0  0:00:04  0:00:04 --:--:-- 11.4M\r\nBuilding flutter tool...\r\n```\r\n\r\nThis has a few downsides:\r\n\r\n## 1. version reporting in bug reports often fails due to timeouts\r\n\r\n![image](https://user-images.githubusercontent.com/67586/50565606-70249300-0ce5-11e9-867b-0b303f1a6a58.png)\r\n\r\nThis [query](https://github.com/flutter/flutter-intellij/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+%22Error+getting+sdk%22+), shows 54 cases like this (and counting).\r\n\r\n## 2. update checking is complicated\r\n\r\nAllowing  for a download and build introduces complexity as clients need to have async handling.  (VSCode notably side-steps this entirely by scraping the \"new version available\" message from stdout when starting the device daemon ([Dart-Code source](https://github.com/Dart-Code/Dart-Code/blob/b2b054bd928c87cdc54ad2741ff122ea1774d7cb/src/flutter/flutter_daemon.ts#L72-L86)).)\r\n\r\nSee also #2932.\r\n\r\n---\r\n\r\n/cc @devoncarew @DanTup \r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "FWIW, where we do display the Flutter version to the user (eg. the status bar) we just read it from the file on disk (and handle it not existing). This might give the wrong answer if the user has just pulled via Git and not run Flutter yet, but it's not used for anything critical and is fast:\r\n\r\nhttps://github.com/Dart-Code/Dart-Code/blob/3767fcb25d35fc58e81bc3e722bdbb79d219308e/src/sdk/utils.ts#L210\r\nhttps://github.com/Dart-Code/Dart-Code/blob/bcc33828091f46d2ea594e994387f774a6fc7dfa/src/utils.ts#L115\r\n\r\nThe scraping is done only to \"upgrade\" the version notification to a VS Code notification instead of just text in the output (which lets us add a clickable-button).",
            "created_at": "2019-01-02T07:58:34Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/3032#issuecomment-450803662",
            "id": 450803662,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDgwMzY2Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/450803662/reactions"
            },
            "updated_at": "2019-01-02T07:59:04Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/450803662",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1078012?v=4",
                "events_url": "https://api.github.com/users/DanTup/events{/privacy}",
                "followers_url": "https://api.github.com/users/DanTup/followers",
                "following_url": "https://api.github.com/users/DanTup/following{/other_user}",
                "gists_url": "https://api.github.com/users/DanTup/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/DanTup",
                "id": 1078012,
                "login": "DanTup",
                "node_id": "MDQ6VXNlcjEwNzgwMTI=",
                "organizations_url": "https://api.github.com/users/DanTup/orgs",
                "received_events_url": "https://api.github.com/users/DanTup/received_events",
                "repos_url": "https://api.github.com/users/DanTup/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/DanTup/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DanTup/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/DanTup"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "One could argue that this is a bug in `flutter version`. Getting version info shouldn't (necessarily) require doing an update.",
            "created_at": "2019-01-07T18:59:43Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/3032#issuecomment-452043241",
            "id": 452043241,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjA0MzI0MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/452043241/reactions"
            },
            "updated_at": "2019-01-07T18:59:43Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/452043241",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8518285?v=4",
                "events_url": "https://api.github.com/users/stevemessick/events{/privacy}",
                "followers_url": "https://api.github.com/users/stevemessick/followers",
                "following_url": "https://api.github.com/users/stevemessick/following{/other_user}",
                "gists_url": "https://api.github.com/users/stevemessick/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stevemessick",
                "id": 8518285,
                "login": "stevemessick",
                "node_id": "MDQ6VXNlcjg1MTgyODU=",
                "organizations_url": "https://api.github.com/users/stevemessick/orgs",
                "received_events_url": "https://api.github.com/users/stevemessick/received_events",
                "repos_url": "https://api.github.com/users/stevemessick/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stevemessick/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stevemessick/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stevemessick"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I somewhat agree, however I don't think it's a simple fix. It's not a Flutter update but rather downloading the Dart VM. The `flutter --version` command is handled by Flutter Tools which need the Dart SDK/VM to execute (it's the wrapping shell script that downloads the Dart SDK if it's missing, before the `--version` switch is handed off to Flutter tools).\r\n\r\nFixing it would probably mean moving all the `flutter --version` handling into the shell script.\r\n\r\nThere are two things that I may have slightly conflated in this issue too:\r\n\r\n- VS Code reads the VERSION file to get the version number to display in the status bar\r\n- VS Code scrapes the \"update available\" notification in the device daemon output and prompts the user to upgrade\r\n\r\nThe first point here is very fast, but may be unreliable. The second one can be slow - if the user opens VS Code and they don't have a Dart SDK, then the flutter daemon will take a long time to start (since it'll download the Dart SDK - we also detect this in the output and show a notification that it's downloading) and then if the update banner appears, we'll also show the update notification.\r\n\r\nNote, it's fairly uncommon for end users to hit both of these (a slow startup because of missing SDK and also an update notification) unless they've manually changed branch to something old or cleared their `bin/cache` folder, since normally when the SDK is missing it's because the user has just updated (and therefore it's unlikely there will be an update notification).",
            "created_at": "2019-01-08T09:39:18Z",
            "html_url": "https://github.com/flutter/flutter-intellij/issues/3032#issuecomment-452234582",
            "id": 452234582,
            "issue_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjIzNDU4Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/452234582/reactions"
            },
            "updated_at": "2019-01-08T09:39:18Z",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/comments/452234582",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1078012?v=4",
                "events_url": "https://api.github.com/users/DanTup/events{/privacy}",
                "followers_url": "https://api.github.com/users/DanTup/followers",
                "following_url": "https://api.github.com/users/DanTup/following{/other_user}",
                "gists_url": "https://api.github.com/users/DanTup/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/DanTup",
                "id": 1078012,
                "login": "DanTup",
                "node_id": "MDQ6VXNlcjEwNzgwMTI=",
                "organizations_url": "https://api.github.com/users/DanTup/orgs",
                "received_events_url": "https://api.github.com/users/DanTup/received_events",
                "repos_url": "https://api.github.com/users/DanTup/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/DanTup/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DanTup/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/DanTup"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032/comments",
    "created_at": "2018-12-31T18:28:42Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/67586?v=4",
                "events_url": "https://api.github.com/users/pq/events{/privacy}",
                "followers_url": "https://api.github.com/users/pq/followers",
                "following_url": "https://api.github.com/users/pq/following{/other_user}",
                "gists_url": "https://api.github.com/users/pq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pq",
                "id": 67586,
                "login": "pq",
                "node_id": "MDQ6VXNlcjY3NTg2",
                "organizations_url": "https://api.github.com/users/pq/orgs",
                "received_events_url": "https://api.github.com/users/pq/received_events",
                "repos_url": "https://api.github.com/users/pq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pq"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "labeled",
            "id": 2049142166,
            "label": {
                "color": "84b6eb",
                "name": "enhancement"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDIwNDkxNDIxNjY=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142166"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/67586?v=4",
                "events_url": "https://api.github.com/users/pq/events{/privacy}",
                "followers_url": "https://api.github.com/users/pq/followers",
                "following_url": "https://api.github.com/users/pq/following{/other_user}",
                "gists_url": "https://api.github.com/users/pq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pq",
                "id": 67586,
                "login": "pq",
                "node_id": "MDQ6VXNlcjY3NTg2",
                "organizations_url": "https://api.github.com/users/pq/orgs",
                "received_events_url": "https://api.github.com/users/pq/received_events",
                "repos_url": "https://api.github.com/users/pq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pq"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "milestoned",
            "id": 2049142169,
            "milestone": {
                "title": "Backlog"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDIwNDkxNDIxNjk=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142169"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1078012?v=4",
                "events_url": "https://api.github.com/users/DanTup/events{/privacy}",
                "followers_url": "https://api.github.com/users/DanTup/followers",
                "following_url": "https://api.github.com/users/DanTup/following{/other_user}",
                "gists_url": "https://api.github.com/users/DanTup/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/DanTup",
                "id": 1078012,
                "login": "DanTup",
                "node_id": "MDQ6VXNlcjEwNzgwMTI=",
                "organizations_url": "https://api.github.com/users/DanTup/orgs",
                "received_events_url": "https://api.github.com/users/DanTup/received_events",
                "repos_url": "https://api.github.com/users/DanTup/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/DanTup/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DanTup/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/DanTup"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "mentioned",
            "id": 2049142176,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA0OTE0MjE3Ng==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142176"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1078012?v=4",
                "events_url": "https://api.github.com/users/DanTup/events{/privacy}",
                "followers_url": "https://api.github.com/users/DanTup/followers",
                "following_url": "https://api.github.com/users/DanTup/following{/other_user}",
                "gists_url": "https://api.github.com/users/DanTup/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/DanTup",
                "id": 1078012,
                "login": "DanTup",
                "node_id": "MDQ6VXNlcjEwNzgwMTI=",
                "organizations_url": "https://api.github.com/users/DanTup/orgs",
                "received_events_url": "https://api.github.com/users/DanTup/received_events",
                "repos_url": "https://api.github.com/users/DanTup/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/DanTup/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DanTup/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/DanTup"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "subscribed",
            "id": 2049142177,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNDkxNDIxNzc=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142177"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1269969?v=4",
                "events_url": "https://api.github.com/users/devoncarew/events{/privacy}",
                "followers_url": "https://api.github.com/users/devoncarew/followers",
                "following_url": "https://api.github.com/users/devoncarew/following{/other_user}",
                "gists_url": "https://api.github.com/users/devoncarew/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/devoncarew",
                "id": 1269969,
                "login": "devoncarew",
                "node_id": "MDQ6VXNlcjEyNjk5Njk=",
                "organizations_url": "https://api.github.com/users/devoncarew/orgs",
                "received_events_url": "https://api.github.com/users/devoncarew/received_events",
                "repos_url": "https://api.github.com/users/devoncarew/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/devoncarew/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/devoncarew/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/devoncarew"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "mentioned",
            "id": 2049142179,
            "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA0OTE0MjE3OQ==",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142179"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1269969?v=4",
                "events_url": "https://api.github.com/users/devoncarew/events{/privacy}",
                "followers_url": "https://api.github.com/users/devoncarew/followers",
                "following_url": "https://api.github.com/users/devoncarew/following{/other_user}",
                "gists_url": "https://api.github.com/users/devoncarew/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/devoncarew",
                "id": 1269969,
                "login": "devoncarew",
                "node_id": "MDQ6VXNlcjEyNjk5Njk=",
                "organizations_url": "https://api.github.com/users/devoncarew/orgs",
                "received_events_url": "https://api.github.com/users/devoncarew/received_events",
                "repos_url": "https://api.github.com/users/devoncarew/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/devoncarew/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/devoncarew/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/devoncarew"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-12-31T18:28:42Z",
            "event": "subscribed",
            "id": 2049142181,
            "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNDkxNDIxODE=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/events/2049142181"
        }
    ],
    "events_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032/events",
    "html_url": "https://github.com/flutter/flutter-intellij/issues/3032",
    "id": 395016840,
    "labels": [
        {
            "color": "84b6eb",
            "default": true,
            "description": null,
            "id": 414053718,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw0MTQwNTM3MTg=",
            "url": "https://api.github.com/repos/flutter/flutter-intellij/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 272,
        "created_at": "2016-11-02T16:47:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/67586?v=4",
            "events_url": "https://api.github.com/users/pq/events{/privacy}",
            "followers_url": "https://api.github.com/users/pq/followers",
            "following_url": "https://api.github.com/users/pq/following{/other_user}",
            "gists_url": "https://api.github.com/users/pq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pq",
            "id": 67586,
            "login": "pq",
            "node_id": "MDQ6VXNlcjY3NTg2",
            "organizations_url": "https://api.github.com/users/pq/orgs",
            "received_events_url": "https://api.github.com/users/pq/received_events",
            "repos_url": "https://api.github.com/users/pq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pq"
        },
        "description": "Work triaged but not yet planned for a specific release.",
        "due_on": null,
        "html_url": "https://github.com/flutter/flutter-intellij/milestone/10",
        "id": 2110115,
        "labels_url": "https://api.github.com/repos/flutter/flutter-intellij/milestones/10/labels",
        "node_id": "MDk6TWlsZXN0b25lMjExMDExNQ==",
        "number": 10,
        "open_issues": 243,
        "state": "open",
        "title": "Backlog",
        "updated_at": "2022-09-30T16:42:45Z",
        "url": "https://api.github.com/repos/flutter/flutter-intellij/milestones/10"
    },
    "node_id": "MDU6SXNzdWUzOTUwMTY4NDA=",
    "number": 3032,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032/reactions"
    },
    "repository_url": "https://api.github.com/repos/flutter/flutter-intellij",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032/timeline",
    "title": "consider bypassing `flutter` for version checking (to avoid download and build)",
    "updated_at": "2019-01-08T09:39:18Z",
    "url": "https://api.github.com/repos/flutter/flutter-intellij/issues/3032",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/67586?v=4",
        "events_url": "https://api.github.com/users/pq/events{/privacy}",
        "followers_url": "https://api.github.com/users/pq/followers",
        "following_url": "https://api.github.com/users/pq/following{/other_user}",
        "gists_url": "https://api.github.com/users/pq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/pq",
        "id": 67586,
        "login": "pq",
        "node_id": "MDQ6VXNlcjY3NTg2",
        "organizations_url": "https://api.github.com/users/pq/orgs",
        "received_events_url": "https://api.github.com/users/pq/received_events",
        "repos_url": "https://api.github.com/users/pq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/pq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/pq"
    }
}